(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{3303:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>v});var n=a(5057),s=a(3589);function l(){return(0,n.jsx)("div",{className:"double-spinner"})}a(4343);var c=a(7076),i=function(e){return e.low="#ff5f56",e.medium="#ffbd2d",e.good="#26c940",e}({}),o=function(e){return e.green="#64dbb2",e.red="#fb6c6d",e.blue="#58abf6",e.yellow="#facd4b",e.purple="#9f5bba",e.brown="#ca8179",e.pink="#ffc5b4",e.black="#0c0c0c",e.gray="#848484",e.white="#b3bbd0",e}({});function d(e){var t;let{pokemon:a,handleClick:s}=e;return(0,n.jsxs)("div",{className:"pokemon-card flex justify-between p-4 relative",style:{backgroundColor:o[a.color]||o.white},onClick:function(){s(a)},"data-testid":"pokemon-card-".concat(a.name),children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h3",{className:"font-bold mb-2 text-white","data-testid":"pokemon-card-".concat(a.name,"-name"),children:(t=a.name)?t.charAt(0).toUpperCase()+t.slice(1):""}),a.types.map((e,t)=>(0,n.jsx)("div",{className:"pokemon-card__skill",children:e.type.name},t)),(0,n.jsx)("div",{className:"pokemon-card__order",children:(0,n.jsxs)("div",{children:["# ",(0,n.jsx)("span",{children:a.order})]})})]}),(0,n.jsx)("div",{className:"flex items-center pl-2",children:(0,n.jsx)(c.default,{className:"pokemon-card__image",src:a.sprites.front_default,alt:a.name,width:96,height:96,priority:!0})})]})}function r(e){let{value:t}=e;return(0,n.jsx)("div",{className:"pokemon-stats",children:(0,n.jsx)("div",{style:{backgroundColor:t<50?i.low:t<75?i.medium:i.good,width:"".concat(t<0?0:t>100?100:t,"%")}})})}a(4180),a(7617);let m=(0,s.createContext)(null);function u(e){let{children:t,getPokemonDetail:a}=e;return(0,n.jsx)(m.Provider,{value:{handleEvolutionClick:function(e){a(e)}},children:t})}function h(e){let{pokemon:t}=e,a=["About","Base Stats","Evolutions","Moves"],[l,i]=(0,s.useState)(a[0]),{handleEvolutionClick:o}=(()=>{let e=(0,s.useContext)(m);if(!e)throw Error("useEvolutionClick must be used in EvolutionClickProvider");return e})();function d(e){return e.charAt(0).toUpperCase()+e.slice(1)}let u=[{label:"Species",value:t.species.name},{label:"Height",value:t.height},{label:"Weight",value:t.weight},{label:"Abilities",value:t.abilities.map(e=>e.ability.name).join(" ")}];return(0,n.jsxs)("div",{className:"pokemon-card-tab",children:[(0,n.jsx)("div",{className:"pokemon-card-tab__navigation flex justify-between items-center px-5 py-4",children:a.map((e,t)=>(0,n.jsx)("div",{className:"pokemon-card-tab__navigation-item ".concat(e===l?"active":""),onClick:()=>i(e),"data-testid":"pokemon-card-tab-navigation-".concat(e),children:e},"navigation-".concat(t)))}),l===a[0]&&(0,n.jsx)("div",{className:"pokemon-card-tab__content","data-testid":"pokemon-card-tab-content-".concat(a[0]),children:u.map((e,t)=>(0,n.jsxs)("div",{className:"flex mb-10",children:[(0,n.jsx)("div",{className:"text-gray-400 basis-[30%] w-[30%]",children:e.label}),(0,n.jsx)("div",{className:"basis-[70%] w-[70%]",children:e.value})]},"about-data-".concat(t)))}),l===a[1]&&(0,n.jsx)("div",{className:"pokemon-card-tab__content","data-testid":"pokemon-card-tab-content-".concat(a[1]),children:t.stats.map((e,t)=>(0,n.jsxs)("div",{className:"flex mb-10 items-center",children:[(0,n.jsx)("div",{className:"text-gray-400 basis-[30%] w-[30%]",children:d(e.stat.name).replaceAll("-"," ")}),(0,n.jsx)("div",{className:"basis-[10%] w-[10%]",children:e.base_stat}),(0,n.jsx)("div",{className:"basis-[60%] w-[60%] px-1",children:(0,n.jsx)(r,{value:e.base_stat})})]},"ability-data-".concat(t)))}),l===a[2]&&(0,n.jsx)("div",{className:"pokemon-card-tab__content","data-testid":"pokemon-card-tab-content-".concat(a[2]),children:(0,n.jsxs)("div",{className:"flex mb-10",children:[(0,n.jsx)("div",{className:"text-gray-400 basis-[30%] w-[30%]",children:"Evolution"}),(0,n.jsx)("div",{className:"basis-[70%] w-[70%]",children:t.evolution&&t.evolution.map(e=>(0,n.jsxs)("div",{className:"flex flex-col items-center mb-2 cursor-pointer",onClick:()=>{var t;o(e.pokemon),null==(t=document.querySelector(".pokemon-card-detail"))||t.scrollTo({top:0,behavior:"smooth"})},"data-testid":"pokemon-card-tab-content-".concat(a[2],"-").concat(e.name),children:[(0,n.jsx)(c.default,{src:e.pokemon.sprites.other["official-artwork"].front_default,alt:e.name,width:200,height:200}),(0,n.jsx)("div",{className:"font-bold text-lg",children:d(e.name)})]},"evolution-".concat(e.name)))})]})}),l===a[3]&&(0,n.jsx)("div",{className:"pokemon-card-tab__content","data-testid":"pokemon-card-tab-content-".concat(a[3]),children:t.moves.map((e,t)=>(0,n.jsxs)("div",{className:"flex mb-10",children:[(0,n.jsx)("div",{className:"text-gray-400 basis-[30%] w-[30%]",children:"Name"}),(0,n.jsx)("div",{className:"basis-[70%] w-[70%]",children:e.move.name})]},"moves-data-".concat(t)))})]})}function p(e){var t;let{className:a,pokemon:l,handleCloseClick:i,useAnimation:d}=e,[r,m]=(0,s.useState)(a),u=(0,s.useRef)(null),p=(0,s.useRef)(!0),v=(0,s.useRef)(!0);return(0,s.useEffect)(()=>{if(v.current){let e=window.scrollY;document.body.style.position="fixed",document.body.style.top="-".concat(e,"px"),document.body.style.left="0",document.body.style.right="0";let t=document.documentElement.scrollHeight;u.current&&(u.current.style.height=t+"px"),v.current=!1}},[]),(0,s.useEffect)(()=>{if(!p.current&&(null==r?void 0:r.includes("slidedown"))){let e=document.body.style.top;document.body.style.position="",document.body.style.top="",document.body.style.left="",document.body.style.right="",window.scrollTo(0,-1*parseInt(e||"0")),setTimeout(()=>{i&&i()},600)}},[r]),(0,n.jsx)("div",{ref:u,className:"pokemon-card-detail bg-white ".concat(r," ").concat(d?"pokemon-card-detail--use-animation":""),"data-testid":"pokemon-card-".concat(l.name,"-detail"),children:(0,n.jsxs)("div",{className:"pokemon-card-detail__container",children:[(0,n.jsxs)("div",{style:{backgroundColor:o[l.color]||o.white},children:[(0,n.jsxs)("div",{className:"flex justify-between items-center px-5 py-4 fade-in",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h3",{className:"text-[40px] font-bold mb-1 text-white",children:(t=l.name).charAt(0).toUpperCase()+t.slice(1)}),(0,n.jsx)("div",{className:"flex",children:l.types.map((e,t)=>(0,n.jsx)("div",{className:"pokemon-card-detail__skill",children:e.type.name},t))})]}),(0,n.jsx)("div",{className:"pokemon-card-detail__order",children:(0,n.jsxs)("div",{children:["# ",(0,n.jsx)("span",{children:l.order})]})})]},"pokemon-upper-detail-".concat(l.name)),(0,n.jsx)("div",{className:"flex items-center justify-center fade-in",children:(0,n.jsx)(c.default,{className:"pokemon-card-detail__image",src:l.sprites.other["official-artwork"].front_default,alt:l.name,width:300,height:300,priority:!0})},"pokemon-image-detail-".concat(l.name)),(0,n.jsx)("div",{className:"pokemon-card-detail__close",onClick:function(){m("".concat(a," slidedown")),p.current&&(p.current=!1)},"data-testid":"pokemon-card-".concat(l.name,"-detail-close"),children:"âœ•"})]}),(0,n.jsx)(h,{pokemon:l})]})})}function v(){let{pokemon:e,isFetching:t,pokemonPagination:a,activePokemon:c,fetchPokemon:i,getPokemonDetail:o,setActivePokemon:r}=(()=>{let e="https://pokeapi.co/api/v2/pokemon",[t,a]=(0,s.useState)([]),[n,l]=(0,s.useState)({}),[c,i]=(0,s.useState)(),[o,d]=(0,s.useState)(),[r,m]=(0,s.useState)(!0),[u,h]=(0,s.useState)();function p(e){return new Promise((t,a)=>{fetch(e).then(e=>e.json()).then(e=>{t(e)}).catch(e=>a(e))})}let v=async t=>{try{var a,s;if(!t.evolution_chain||!t.color){let e=await p(t.species.url);t.evolution_chain=e.evolution_chain,t.color=e.color.name}let c=await (s=null==(a=t.evolution_chain)?void 0:a.url,new Promise((e,t)=>{fetch(s).then(e=>e.json()).then(t=>{e({...t})}).catch(e=>t(e))})),i=function e(t){return 0===t.evolves_to.length?[t.species.name]:[t.species.name,...e(t.evolves_to[0])]}(c.chain),o=(await Promise.allSettled(i.map(t=>n[t]?Promise.resolve(n[t]):new Promise((a,n)=>{fetch("".concat(e,"/").concat(t)).then(e=>e.json()).then(e=>{a(e)}).catch(e=>n(e))})))).filter(e=>"fulfilled"===e.status).map(e=>e.value).reduce((e,t)=>({...e,[t.name]:t}),{});l({...n,...o});let r=i.map(e=>({name:e,pokemon:o[e]})),m={...t,evolution:r};d(m)}catch(e){}},f=async e=>{let s=(await Promise.allSettled(e.map(e=>new Promise((t,a)=>{fetch(e.url).then(e=>e.json()).then(e=>{t(e)}).catch(e=>a(e))})))).filter(e=>"fulfilled"===e.status).map(e=>e.value),c=(await Promise.allSettled(s.map(e=>p(e.species.url)))).filter(e=>"fulfilled"===e.status).map(e=>e.value).reduce((e,t)=>({...e,[t.name]:t}),{}),i=s.map(e=>({...e,evolution_chain:c[e.name].evolution_chain,color:c[e.name].color.name}));a([...t,...i]);let o=i.reduce((e,t)=>({...e,[t.name]:t}),{});l({...n,...o}),m(!1)};async function x(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e;try{m(!0);let e=await fetch(t),a=await e.json();i(a),f(a.results)}catch(e){h(e)}}return(0,s.useEffect)(()=>{x()},[]),{pokemon:t,pokemonPagination:c,activePokemon:o,fetchPokemon:x,getPokemonDetail:v,setActivePokemon:d,isFetching:r,error:u}})();function m(e){o(e)}return(0,s.useEffect)(()=>{let e=()=>{let{scrollTop:e,scrollHeight:n,clientHeight:s}=document.documentElement;!c&&!t&&(null==a?void 0:a.next)&&e+s>=n-50&&i(null==a?void 0:a.next)};return window.addEventListener("scroll",e),()=>window.removeEventListener("scroll",e)},[t,null==a?void 0:a.next,c]),(0,s.useEffect)(()=>{let{scrollHeight:e,clientHeight:n}=document.documentElement;!c&&!t&&(null==a?void 0:a.next)&&e<=n&&i(null==a?void 0:a.next)},[t,null==a?void 0:a.next,c]),(0,n.jsx)("div",{className:"flex justify-center pb-10 px-3",children:(0,n.jsxs)("main",{className:"lg:w-[1024px] sm:w-[800px] w-[480px] relative",children:[(0,n.jsx)("h1",{className:"text-[40px] font-bold mt-10 mb-6",children:"Pokedex"}),(0,n.jsx)("div",{className:"flex flex-wrap gap-4 mb-4",children:e&&e.map(e=>(0,n.jsx)("div",{className:"lg:basis-[calc(25%-0.8rem)] lg:w--[calc(25%-0.8rem)] sm:basis-[calc(33%-0.6rem)] sm:w--[calc(33%-0.6rem)] basis-[calc(50%-0.5rem)] w--[calc(50%-0.5rem)]",children:(0,n.jsx)(d,{pokemon:e,handleClick:m})},e.name))}),t&&(0,n.jsx)("div",{className:"flex justify-center",children:(0,n.jsx)(l,{})}),(0,n.jsx)(u,{getPokemonDetail:o,children:c&&(0,n.jsx)(p,{pokemon:c,handleCloseClick:function(){r(void 0)},className:"absolute top-0 left-0 w-[inherit] h-[-webkit-fill-available]",useAnimation:!0})})]})})}a(5415),a(6758)},4180:()=>{},4343:()=>{},5415:()=>{},6758:()=>{},7411:(e,t,a)=>{Promise.resolve().then(a.bind(a,3303))},7617:()=>{}},e=>{e.O(0,[454,76,408,612,358],()=>e(e.s=7411)),_N_E=e.O()}]);